<section class="bg-sloe-bg-default py-8 md:py-16">
  <div class="max-w-container mx-auto px-page">
    <h3 class="text-2xl md:text-3xl font-bold font-heading text-sloe-text-headings mb-8 text-center">
      {{ section.settings.heading }}
    </h3>

    <!-- Reviews Summary -->
    <div class="bg-sloe-bg-card rounded-card p-6 md:p-8 mb-8">
      <div class="flex flex-col md:flex-row items-center justify-center gap-6 text-center">
        <div>
          <div class="flex items-center justify-center gap-1 mb-2">
            {% for i in (1..5) %}
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-sloe-primary" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
            {% endfor %}
          </div>
          <p class="text-2xl md:text-3xl font-bold text-sloe-text-headings">4.8/5</p>
          <p class="text-sloe-text-body">Based on {{ section.settings.review_count }} reviews</p>
        </div>
        <div class="w-px h-16 bg-sloe-bg-border hidden md:block"></div>
        <div>
          <p class="text-lg md:text-xl font-bold text-sloe-text-headings mb-2">{{ section.settings.satisfaction_rate }}% of customers</p>
          <p class="text-sloe-text-body">would recommend this product</p>
        </div>
      </div>
    </div>

    <!-- Individual Reviews -->
    <div class="space-y-6">
      {% for review in section.blocks %}
        <div class="bg-sloe-bg-card rounded-card p-6 md:p-8">
          <div class="flex flex-col sm:flex-row sm:items-start gap-4">
            <!-- Avatar -->
            <div class="w-12 h-12 bg-sloe-primary rounded-full flex items-center justify-center flex-shrink-0">
              <span class="text-sloe-text-on-primary font-bold">
                {{ review.settings.reviewer_name | first | upcase }}
              </span>
            </div>
            
            <!-- Review Content -->
            <div class="flex-1 min-w-0">
              <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3">
                <div>
                  <h4 class="font-bold text-sloe-text-headings">{{ review.settings.reviewer_name }}</h4>
                  <p class="text-sm text-sloe-text-body">Verified Purchase</p>
                </div>
                <div class="flex items-center gap-1 flex-shrink-0">
                  {% assign rating = review.settings.rating | default: 5 %}
                  {% for i in (1..5) %}
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 {% if i <= rating %}text-sloe-primary{% else %}text-gray-500{% endif %}" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                  {% endfor %}
                </div>
              </div>
              
              <h5 class="font-semibold text-sloe-text-headings mb-2">{{ review.settings.review_title }}</h5>
              <p class="text-sloe-text-body leading-relaxed mb-3">{{ review.settings.review_content }}</p>
              
              <div class="flex flex-wrap items-center gap-4 text-sm text-sloe-text-body">
                <span>{{ review.settings.review_date }}</span>
                {% if review.settings.variant_purchased %}
                  <span>•</span>
                  <span>Variant: {{ review.settings.variant_purchased }}</span>
                {% endif %}
                <span>•</span>
                <button class="text-sloe-primary hover:underline">Helpful ({{ review.settings.helpful_count | default: 0 }})</button>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Load More Reviews -->
    <div class="text-center mt-8">
      <button class="border border-sloe-primary text-sloe-primary rounded-btn py-3 px-6 font-medium hover:bg-sloe-primary hover:text-sloe-text-on-primary transition-colors duration-200">
        Load More Reviews
      </button>
    </div>

    <!-- Write Review CTA -->
    <div class="bg-sloe-bg-card rounded-card p-6 md:p-8 mt-8 text-center">
      <h4 class="text-xl font-bold font-heading text-sloe-text-headings mb-4">
        Share Your Experience
      </h4>
      <p class="text-sloe-text-body mb-6 max-w-2xl mx-auto">
        Help other customers make informed decisions by sharing your honest feedback about this product.
      </p>
      <button class="bg-sloe-primary text-sloe-text-on-primary rounded-btn py-3 px-6 font-bold font-heading hover:bg-sloe-accent transition-colors duration-200">
        Write a Review
      </button>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product Reviews",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Customer Reviews"
    },
    {
      "type": "number",
      "id": "review_count",
      "label": "Total Review Count",
      "default": 247
    },
    {
      "type": "number",
      "id": "satisfaction_rate",
      "label": "Satisfaction Rate (%)",
      "default": 94
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Customer Review",
      "settings": [
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "Reviewer Name",
          "default": "Sarah M."
        },
        {
          "type": "range",
          "id": "rating",
          "label": "Star Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "text",
          "id": "review_title",
          "label": "Review Title",
          "default": "Amazing results!"
        },
        {
          "type": "textarea",
          "id": "review_content",
          "label": "Review Content",
          "default": "I've been using this supplement for 3 months and the results are incredible. My energy levels during workouts have significantly improved, and my recovery time has been cut in half. Highly recommended!"
        },
        {
          "type": "text",
          "id": "review_date",
          "label": "Review Date",
          "default": "October 15, 2024"
        },
        {
          "type": "text",
          "id": "variant_purchased",
          "label": "Product Variant (optional)"
        },
        {
          "type": "number",
          "id": "helpful_count",
          "label": "Helpful Count",
          "default": 12
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Reviews",
      "blocks": [
        {
          "type": "review",
          "settings": {
            "reviewer_name": "Sarah M.",
            "rating": 5,
            "review_title": "Amazing results!",
            "review_content": "I've been using this supplement for 3 months and the results are incredible. My energy levels during workouts have significantly improved, and my recovery time has been cut in half. Highly recommended!",
            "review_date": "October 15, 2024",
            "variant_purchased": "Vanilla Protein",
            "helpful_count": 12
          }
        },
        {
          "type": "review",
          "settings": {
            "reviewer_name": "Mike T.",
            "rating": 5,
            "review_title": "Great taste and effectiveness",
            "review_content": "Unlike other protein powders I've tried, this one actually tastes great and mixes smoothly. The performance benefits are noticeable within the first week.",
            "review_date": "October 8, 2024",
            "variant_purchased": "Chocolate Protein",
            "helpful_count": 8
          }
        },
        {
          "type": "review",
          "settings": {
            "reviewer_name": "Jessica L.",
            "rating": 4,
            "review_title": "Good product, fast shipping",
            "review_content": "Really happy with this purchase. The product quality is excellent and it arrived faster than expected. Only wish there were more flavor options.",
            "review_date": "September 28, 2024",
            "helpful_count": 5
          }
        }
      ]
    }
  ]
}
{% endschema %}